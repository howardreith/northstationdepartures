(this["webpackJsonpmbta-departure"]=this["webpackJsonpmbta-departure"]||[]).push([[0],{41:function(e,t,a){},42:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(28),i=a.n(c),s=(a(41),a(42),a(59)),o=a(65),d=a(14),l=a.n(d),u=a(17),b=a(23),p=a(60),m=a(61),j=a(62),h=a(63),g=a(67),x=a(64),f=a(2),O=Object(s.a)({clockText:{color:"gold",margin:0}});function C(e){var t=Object(r.useState)(new Date),a=Object(b.a)(t,2),n=a[0],c=a[1],i=e.isTime,s=O();Object(r.useEffect)((function(){var e=setInterval((function(){return c(new Date)}),1e3);return function(){clearInterval(e)}}),[]);var d=n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});"0"===d[0]&&(d=d.replace("0",""));var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][n.getDay()],u=n.toLocaleDateString().replace(/\//g,"-");return i?Object(f.jsxs)(o.a,{children:[Object(f.jsx)("p",{className:s.clockText,"data-test-id":"currentTimeHeader",children:"CURRENT TIME"}),Object(f.jsx)("p",{className:s.clockText,"data-test-id":"time",children:d})]}):Object(f.jsxs)(o.a,{children:[Object(f.jsx)("p",{className:s.clockText,"data-test-id":"dateOfWeek",children:l}),Object(f.jsx)("p",{className:s.clockText,"data-test-id":"currentDate",children:u})]})}var T="c02fa457cbd644588424aa06644773aa";function v(e){return N.apply(this,arguments)}function N(){return(N=Object(u.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,fetch("https://api-v3.mbta.com/predictions/?api_key=".concat(T,"&sort=departure_time&direction_id=0&stop=place-north&route=CR-Fitchburg,CR-Haverhill,CR-Lowell,CR-Newburyport,CR-Greenbush,CR-Middleborough,CR-Kingston,CR-Fairmount,CR-Franklin,CR-Worcester,CR-Providence,CR-Needham"));case 3:return r=e.sent,e.next=6,r.json();case 6:return e.sent.data.forEach((function(e){var r=e.id.replace("prediction-","");a[r]={};var n=e.relationships.stop.data.id.split("-");e.attributes.departure_time?a[r].departureTime=e.attributes.departure_time:t&&t[r]?a[r].departureTime=t[r].departureTime:delete a[r],a[r]&&(a[r].name=r,a[r].destination=e.relationships.route.data.id.replace("CR-",""),a[r].status=e.attributes.status,a[r].trainNumber=e.relationships.vehicle.data&&e.relationships.vehicle.data.id||"TBD",a[r].trackNumber=n.length>2?n[2]:"TBD")})),e.abrupt("return",Object.values(a).sort((function(e,t){return new Date(e.departureTime)-new Date(t.departureTime)})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=Object(s.a)({boxContainer:{backgroundColor:"black",marginLeft:"20px",marginRight:"20px",marginTop:"20px"},table:{minWidth:650},tableHeading:{color:"gray",paddingTop:"2px",paddingBottom:"2px",borderBottom:"1px solid darkgray"},mainHeading:{color:"gray",marginTop:0,marginBottom:0},tableCell:{color:"gold",fontFamily:"Lucida Console",fontSize:"16px",paddingTop:"2px",paddingBottom:"2px",borderBottom:"1px solid darkgray"}});function k(){var e=Object(r.useState)(null),t=Object(b.a)(e,2),a=t[0],n=t[1],c=Object(r.useRef)({}),i=R();return Object(r.useEffect)((function(){fetch("https://api-v3.mbta.com/schedules/?api_key=".concat("c02fa457cbd644588424aa06644773aa","&sort=departure_time&direction_id=0&stop=place-north&route=CR-Fitchburg,CR-Haverhill,CR-Lowell,CR-Newburyport,CR-Greenbush,CR-Middleborough,CR-Kingston,CR-Fairmount,CR-Franklin,CR-Worcester,CR-Providence,CR-Needham")).then((function(e){return e.json()})).then((function(e){e.data.forEach((function(e){var t=e.id.replace("schedule-","");c.current[t]={},c.current[t].departureTime=e.attributes.departure_time,c.current[t].destination=e.relationships.route.data.id.replace("CR-","")}))})).then((function(){v(c.current).then((function(e){n(e)}))})).catch((function(e){console.error("An error occurred fetching data from MBTA API: ",e)}))}),[]),Object(r.useEffect)((function(){var e=setInterval(Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(c.current);case 2:return t=e.sent,e.abrupt("return",n(t));case 4:case"end":return e.stop()}}),e)}))),1e4);return function(){clearInterval(e)}}),[]),Object(f.jsxs)(o.a,{className:i.boxContainer,children:[Object(f.jsxs)(o.a,{display:"flex",width:"100%",paddingTop:"15px",children:[Object(f.jsx)(o.a,{paddingLeft:"15px",children:Object(f.jsx)(C,{isTime:!1})}),Object(f.jsx)(o.a,{marginLeft:"auto",textAlign:"center",children:Object(f.jsx)("h1",{className:i.mainHeading,children:"North Station Information"})}),Object(f.jsx)(o.a,{paddingRight:"15px",marginLeft:"auto",children:Object(f.jsx)(C,{isTime:!0})})]}),Object(f.jsx)(p.a,{children:Object(f.jsxs)(m.a,{className:i.table,children:[Object(f.jsx)(j.a,{children:Object(f.jsxs)(h.a,{children:[Object(f.jsx)(g.a,{className:i.tableHeading,align:"center",children:"Carrier"}),Object(f.jsx)(g.a,{className:i.tableHeading,align:"center",children:"Time"}),Object(f.jsx)(g.a,{className:i.tableHeading,align:"center",children:"Destination"}),Object(f.jsx)(g.a,{className:i.tableHeading,align:"center",children:"Train#"}),Object(f.jsx)(g.a,{className:i.tableHeading,align:"center",children:"Track"}),Object(f.jsx)(g.a,{className:i.tableHeading,align:"center",children:"Status"})]})}),Object(f.jsx)(x.a,{children:a&&a.map((function(e){var t=new Date(e.departureTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return"0"===t[0]&&(t=t.replace("0","")),Object(f.jsxs)(h.a,{"data-test-id":"".concat(e.name,"-row"),"data-test-type":"departureRow",children:[Object(f.jsx)(g.a,{"data-test-id":"".concat(e.name,"-carrier"),className:i.tableCell,align:"left",children:"MBTA"},"".concat(e.name,"-carrier")),Object(f.jsx)(g.a,{"data-test-id":"".concat(e.name,"-departureTime"),className:i.tableCell,align:"left",children:t},"".concat(e.name,"-departureTime")),Object(f.jsx)(g.a,{"data-test-id":"".concat(e.name,"-destination"),className:i.tableCell,align:"left",children:e.destination},"".concat(e.name,"-destination")),Object(f.jsx)(g.a,{"data-test-id":"".concat(e.name,"-trainNumber"),className:i.tableCell,align:"left",children:e.trainNumber},"".concat(e.name,"-trainNumber")),Object(f.jsx)(g.a,{"data-test-id":"".concat(e.name,"-trackNumber"),className:i.tableCell,align:"left",children:e.trackNumber},"".concat(e.name,"-trackNumber")),Object(f.jsx)(g.a,{"data-test-id":"".concat(e.name,"-status"),className:i.tableCell,align:"left",children:e.status},"".concat(e.name,"-status"))]},e.name)}))})]})})]})}var y=a.p+"static/media/northSationBackground.19baa4d7.jpeg",w=Object(s.a)({appWrapper:{backgroundImage:"url(".concat(y,")"),backgroundRepeat:"no-repeat",backgroundSize:"100% 100%",height:"100vh",width:"100%",margin:0,position:"fixed"}});var S=function(){var e=w();return Object(f.jsx)(o.a,{className:e.appWrapper,children:Object(f.jsx)(o.a,{children:Object(f.jsx)(k,{})})})};i.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(S,{})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.88477c76.chunk.js.map